(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{382:function(e,t,a){"use strict";a.r(t);var s=a(32),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("p",[e._v("To create or work on a Silverback project the following tools have to be available on your system:")]),e._v(" "),a("ul",[a("li",[e._v("A "),a("a",{attrs:{href:"http://php.net/manual/en/install.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("PHP 7"),a("OutboundLink")],1),e._v(" interpreter meeting "),a("a",{attrs:{href:"https://www.drupal.org/docs/8/system-requirements/php-requirements",target:"_blank",rel:"noopener noreferrer"}},[e._v("Drupal requirements"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Installed and configured "),a("a",{attrs:{href:"https://direnv.net/",target:"_blank",rel:"noopener noreferrer"}},[e._v("direnv"),a("OutboundLink")],1),e._v(" (don't forget about the "),a("a",{attrs:{href:"https://direnv.net/index.html#setup",target:"_blank",rel:"noopener noreferrer"}},[e._v("setup"),a("OutboundLink")],1),e._v(" for your shell)")]),e._v(" "),a("li",[e._v("Globally installed "),a("a",{attrs:{href:"https://getcomposer.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("composer"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("em",[e._v("Optional:")]),e._v(" A bitcoin miner to give the other three processor cores a purpose, since they are not consumed by docker any more.")])]),e._v(" "),a("h2",{attrs:{id:"project-initialisation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#project-initialisation"}},[e._v("#")]),e._v(" Project initialisation")]),e._v(" "),a("p",[e._v("Given you already created a composer based Drupal project like this:")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("composer create-project drupal-composer/drupal-project:8.x-dev my-project --no-interaction\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("You just have to require the "),a("code",[e._v("amazeelabs/silverback")]),e._v(" composer package and initialise it:")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" my-project\ncomposer require amazeelabs/silverback\n./vendor/bin/silverback init\ncomposer "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("Note that the seemingly unnecessary extra "),a("code",[e._v("composer install")]),e._v(" is to allow patches to be applied.")]),e._v(" "),a("p",[e._v("If you've set up "),a("code",[e._v("direnv")]),e._v(" correctly, it will complain at this point that there is an unknown "),a("code",[e._v(".envrc")]),e._v(" file. Just execute "),a("code",[e._v("direnv allow")]),e._v(" to enable it. From now on environment variables and executable search paths will be set automatically whenever you enter this directory. Here is how it should look in case of a correct installation:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("me@local:~/Projects $ cd my-project/\ndirenv: error .envrc is blocked. Run `direnv allow` to approve its content.\nme@local:~/Projects/my-project $ direnv allow\ndirenv: loading .envrc\ndirenv: export +CYPRESS_BASE_URL ... +SB_TEST_CONTENT ~PATH\nme@local:~/Projects/my-project $ cd ..\ndirenv: unloading\nme@local:~/Projects $ cd my-project/\ndirenv: loading .envrc\ndirenv: export +CYPRESS_BASE_URL ... +SB_TEST_CONTENT ~PATH\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("p",[e._v("Requiring and initiating the package did a couple of things:")]),e._v(" "),a("ul",[a("li",[e._v("A list of common project dependencies have been installed.")]),e._v(" "),a("li",[e._v("Configuration files for Travis, Lando and amazee.io have been created.")]),e._v(" "),a("li",[e._v("Your composer.json has been slightly modified.")]),e._v(" "),a("li",[e._v("An environment-based "),a("code",[e._v("settings.php")]),e._v(" has been placed in "),a("code",[e._v("web/sites/default")]),e._v(".")]),e._v(" "),a("li",[e._v("A "),a("code",[e._v("tests")]),e._v(" directory with a fully operational [Cypress] setup appeared.")]),e._v(" "),a("li",[e._v("A "),a("code",[e._v(".env")]),e._v(" file was initialised that you can use to configure your local environment.")])]),e._v(" "),a("h2",{attrs:{id:"updating"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updating"}},[e._v("#")]),e._v(" Updating")]),e._v(" "),a("p",[e._v("To update Silverback along with its dependencies simply update the composer package:")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("composer upgrade amazeelabs/silverback --with-dependencies\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("This will also trigger an update hook that re-runs "),a("code",[e._v("silverback init")]),e._v(". If you removed the update hook, you'll have to do that yourself. This will overwrite all the scaffolded files to get in any updates. You can just use git to select which updates you want and which not.")]),e._v(" "),a("h2",{attrs:{id:"running-the-website-locally"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-the-website-locally"}},[e._v("#")]),e._v(" Running the website locally")]),e._v(" "),a("p",[e._v("To run the project locally, just execute the setup procedure and start a local development server:")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("silverback setup\ndrush serve\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("Now your Drupal installation should be accessible at http://localhost:8888. Admin account credentials can be configured in your "),a("code",[e._v(".env")]),e._v(" file.")]),e._v(" "),a("p",[e._v("Another invocation of "),a("code",[e._v("silverback setup")]),e._v(" will scratch the current install and and create a new one. "),a("code",[e._v("silverback teardown")]),e._v(" will just do the "),a("em",[e._v("scratch")]),e._v(" part. Running "),a("code",[e._v("silverback setup --backup")]),e._v(" will create a backup before removing the current install, and "),a("code",[e._v("silverback teardown --restore")]),e._v(" will bring the latest backup back. These two commands are mainly used by the end to end testing processes to spin up test sites ("),a("em",[e._v("TODO: Move test sites to simpletest subsites")]),e._v(").")]),e._v(" "),a("p",[a("strong",[e._v("Danger:")]),e._v(" Currently, there can be only "),a("em",[a("strong",[e._v("one")])]),e._v(" backup.")])])}),[],!1,null,null,null);t.default=n.exports}}]);