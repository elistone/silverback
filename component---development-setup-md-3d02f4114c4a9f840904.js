(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{hCoL:function(e,a,n){"use strict";n.r(a),n.d(a,"_frontmatter",(function(){return c})),n.d(a,"default",(function(){return o}));n("5hJT"),n("W1QL"),n("K/PF"),n("t91x"),n("75LO"),n("PJhk");var t=n("/FXl"),s=n("TjRS");n("aD51");function r(){return(r=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var c={};void 0!==c&&c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"development/setup.md"}});var l={_frontmatter:c},p=s.a;function o(e){var a=e.components,n=function(e,a){if(null==e)return{};var n,t,s={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,["components"]);return Object(t.b)(p,r({},l,n,{components:a,mdxType:"MDXLayout"}),Object(t.b)("h1",{id:"installation"},"Installation"),Object(t.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(t.b)("p",null,"To create or work on a Silverback project the following tools have to be available on your system:"),Object(t.b)("ul",null,Object(t.b)("li",{parentName:"ul"},"A ",Object(t.b)("a",r({parentName:"li"},{href:"http://php.net/manual/en/install.php"}),"PHP 7")," interpreter meeting ",Object(t.b)("a",r({parentName:"li"},{href:"https://www.drupal.org/docs/8/system-requirements/php-requirements"}),"Drupal requirements")),Object(t.b)("li",{parentName:"ul"},"Installed and configured ",Object(t.b)("a",r({parentName:"li"},{href:"https://direnv.net/"}),"direnv")," (don't forget about the ",Object(t.b)("a",r({parentName:"li"},{href:"https://direnv.net/index.html#setup"}),"setup")," for your shell)"),Object(t.b)("li",{parentName:"ul"},"Globally installed ",Object(t.b)("a",r({parentName:"li"},{href:"https://getcomposer.org/"}),"composer")),Object(t.b)("li",{parentName:"ul"},Object(t.b)("em",{parentName:"li"},"Optional:")," A bitcoin miner to give the other three processor cores a purpose, since they are not consumed by docker any more.")),Object(t.b)("h2",{id:"project-initialisation"},"Project initialisation"),Object(t.b)("p",null,"Given you already created a composer based Drupal project like this:"),Object(t.b)("pre",{className:"grvsc-container default-dark","data-language":"bash","data-index":"0"},Object(t.b)("code",r({parentName:"pre"},{className:"grvsc-code"}),Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"composer create-project drupal-composer/drupal-project:8.x-dev my-project --no-interaction"))))),Object(t.b)("p",null,"You just have to require the ",Object(t.b)("inlineCode",{parentName:"p"},"amazeelabs/silverback")," composer package and initialise it:"),Object(t.b)("pre",{className:"grvsc-container default-dark","data-language":"bash","data-index":"1"},Object(t.b)("code",r({parentName:"pre"},{className:"grvsc-code"}),Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk11"}),"cd"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," my-project"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"composer require amazeelabs/silverback"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"./vendor/bin/silverback init"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"composer install"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"yarn"))))),Object(t.b)("p",null,"Note that the seemingly unnecessary extra ",Object(t.b)("inlineCode",{parentName:"p"},"composer install")," is to allow patches to be applied."),Object(t.b)("p",null,"If you've set up ",Object(t.b)("inlineCode",{parentName:"p"},"direnv")," correctly, it will complain at this point that there is an unknown ",Object(t.b)("inlineCode",{parentName:"p"},".envrc")," file. Just execute ",Object(t.b)("inlineCode",{parentName:"p"},"direnv allow")," to enable it. From now on environment variables and executable search paths will be set automatically whenever you enter this directory. Here is how it should look in case of a correct installation:"),Object(t.b)("pre",{className:"grvsc-container default-dark","data-language":"bash","data-index":"2"},Object(t.b)("code",r({parentName:"pre"},{className:"grvsc-code"}),Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"me@local:~/Projects $ "),Object(t.b)("span",r({parentName:"span"},{className:"mtk11"}),"cd"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," my-project/"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"direnv: error .envrc is blocked. Run "),Object(t.b)("span",r({parentName:"span"},{className:"mtk8"}),"`direnv allow`"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," to approve its content."))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"me@local:~/Projects/my-project $ direnv allow"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"direnv: loading .envrc"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"direnv: "),Object(t.b)("span",r({parentName:"span"},{className:"mtk4"}),"export"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," +CYPRESS_BASE_URL ... +SB_TEST_CONTENT ~PATH"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"me@local:~/Projects/my-project $ "),Object(t.b)("span",r({parentName:"span"},{className:"mtk11"}),"cd"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," .."))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"direnv: unloading"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"me@local:~/Projects $ "),Object(t.b)("span",r({parentName:"span"},{className:"mtk11"}),"cd"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," my-project/"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"direnv: loading .envrc"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"direnv: "),Object(t.b)("span",r({parentName:"span"},{className:"mtk4"}),"export"),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"})," +CYPRESS_BASE_URL ... +SB_TEST_CONTENT ~PATH"))))),Object(t.b)("p",null,"Requiring and initiating the package did a couple of things:"),Object(t.b)("ul",null,Object(t.b)("li",{parentName:"ul"},"A list of common project dependencies have been installed."),Object(t.b)("li",{parentName:"ul"},"Configuration files for Travis, Lando and amazee.io have been created."),Object(t.b)("li",{parentName:"ul"},"Your composer.json has been slightly modified."),Object(t.b)("li",{parentName:"ul"},"An environment-based ",Object(t.b)("inlineCode",{parentName:"li"},"settings.php")," has been placed in ",Object(t.b)("inlineCode",{parentName:"li"},"web/sites/default"),"."),Object(t.b)("li",{parentName:"ul"},"A ",Object(t.b)("inlineCode",{parentName:"li"},"tests")," directory with a fully operational ",Object(t.b)("a",r({parentName:"li"},{href:"https://www.cypress.io/"}),"Cypress")," setup appeared."),Object(t.b)("li",{parentName:"ul"},"A ",Object(t.b)("inlineCode",{parentName:"li"},".env")," file was initialised that you can use to configure your local environment.")),Object(t.b)("h2",{id:"updating"},"Updating"),Object(t.b)("p",null,"To update Silverback along with its dependencies simply update the composer package:"),Object(t.b)("pre",{className:"grvsc-container default-dark","data-language":"bash","data-index":"3"},Object(t.b)("code",r({parentName:"pre"},{className:"grvsc-code"}),Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"composer upgrade amazeelabs/silverback --with-dependencies"))))),Object(t.b)("p",null,"This will also trigger an update hook that re-runs ",Object(t.b)("inlineCode",{parentName:"p"},"silverback init"),". If you removed the update hook, you'll have to do that yourself. This will overwrite all the scaffolded files to get in any updates. You can just use git to select which updates you want and which not."),Object(t.b)("h2",{id:"running-the-website-locally"},"Running the website locally"),Object(t.b)("p",null,"To run the project locally, just execute the setup procedure and start a local development server:"),Object(t.b)("pre",{className:"grvsc-container default-dark","data-language":"bash","data-index":"4"},Object(t.b)("code",r({parentName:"pre"},{className:"grvsc-code"}),Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"silverback setup"))),"\n",Object(t.b)("span",r({parentName:"code"},{className:"grvsc-line"}),Object(t.b)("span",r({parentName:"span"},{className:"grvsc-source"}),Object(t.b)("span",r({parentName:"span"},{className:"mtk1"}),"drush serve"))))),Object(t.b)("p",null,"Now your Drupal installation should be accessible at ",Object(t.b)("a",r({parentName:"p"},{href:"http://localhost:8888"}),"http://localhost:8888"),". Admin account credentials can be configured in your ",Object(t.b)("inlineCode",{parentName:"p"},".env")," file."),Object(t.b)("p",null,"Another invocation of ",Object(t.b)("inlineCode",{parentName:"p"},"silverback setup")," will scratch the current install and and create a new one. ",Object(t.b)("inlineCode",{parentName:"p"},"silverback teardown")," will just do the ",Object(t.b)("em",{parentName:"p"},"scratch")," part. Running ",Object(t.b)("inlineCode",{parentName:"p"},"silverback setup --backup")," will create a backup before removing the current install, and ",Object(t.b)("inlineCode",{parentName:"p"},"silverback teardown --restore")," will bring the latest backup back. These two commands are mainly used by the end to end testing processes to spin up test sites (",Object(t.b)("em",{parentName:"p"},"TODO: Move test sites to simpletest subsites"),")."),Object(t.b)("p",null,Object(t.b)("strong",{parentName:"p"},"Danger:")," Currently, there can be only ",Object(t.b)("strong",{parentName:"p"},Object(t.b)("em",{parentName:"strong"},"one"))," backup."),Object(t.b)("style",{className:"grvsc-styles"},"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n"))}o&&o===Object(o)&&Object.isExtensible(o)&&!o.hasOwnProperty("__filemeta")&&Object.defineProperty(o,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"development/setup.md"}}),o.isMDXComponent=!0}}]);
//# sourceMappingURL=component---development-setup-md-3d02f4114c4a9f840904.js.map